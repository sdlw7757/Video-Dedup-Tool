# 视频去重工具 video_dedup_tool
<img width="1652" height="1036" alt="捕获" src="https://github.com/user-attachments/assets/7fdf899a-5dde-4dd1-84da-600e8c3ed32e" />

## 简介

这是一个基于 Python 和 FFmpeg 的视频去重工具，通过修改视频的视觉特征和文件特征来实现视频去重，避免平台的重复内容检测。本工具已集成所有必要组件，可直接运行。

## 功能特性

1. **水平镜像** - 对视频进行水平翻转
2. **RGB偏移** - 对视频的RGB通道进行轻微偏移
3. **时间跳跃** - 让视频中的帧进行周期性的变速波动（肉眼看不到）
4. **修改MD5值** - 通过重新编码和添加元数据修改文件MD5值
5. **蒙版倒置** - 通过调整视频透明度来创建视觉变化效果
6. **视频抽针** - 通过抽取特定帧来创建视频变化

## 技术架构

- **编程语言**: Python 3.12.4（已集成）
- **图形界面**: tkinter (Python内置)
- **视频处理**: FFmpeg 8.0（已集成）
- **操作系统**: Windows

## 项目结构

```
项目根目录/
├── ffmpeg-8.0/           # FFmpeg程序目录（已集成）
│   ├── bin/              # 可执行文件
│   │   ├── ffmpeg.exe    # 视频处理主程序
│   │   ├── ffprobe.exe   # 媒体信息分析工具
│   │   └── ffplay.exe    # 视频播放器
│   └── ...
├── python/               # Python运行环境（已集成）
│   ├── python.exe        # Python主程序
│   └── ...
│── video_dedup_tool.py   # 主程序文件
├── start.bat             # 推荐启动脚本
├── launch_tool.bat       # 备用启动脚本
 ├── README.md             # 英文说明文档
└── 使用说明.txt          # 中文说明文档
```

## 使用方法

### 方法一：使用启动脚本（推荐）

1. 双击运行 ``start.bat`` 文件
2. 在弹出的界面中点击“浏览...”选择要处理的视频文件
3. 设置输出文件保存位置
4. 勾选需要的去重功能
5. 点击“开始处理”按钮
6. 处理完成后，会在指定位置生成处理后的视频文件

### 方法二：直接运行Python文件

在命令行中执行：
```bash
python video_dedup_tool.py
```
或者
```bash
python\python.exe video_dedup_tool.py
```

## 功能详解

### 时间跳跃
让视频中的帧进行周期性的变速波动（肉眼看不到），通过使用minterpolate滤镜创建微妙的时间波动效果，在保持视频总时长不变的情况下，创建微妙的帧速率变化，肉眼几乎察觉不到但能有效避免重复检测。

### RGB偏移
让视频 RGB 颜色通道按设置偏移，达到换色目的。通过对RGB通道进行轻微的空间偏移来产生视觉差异。

### 水平镜像
让视频进行左右镜像翻转，改变视频的视觉内容但保持内容完整性。

### 修改MD5值
通过重新编码视频并添加随机元数据，规避平台重复检测。确保输出文件的MD5值与原文件不同。

### 蒙版倒置
通过调整视频透明度来创建视觉变化效果，可设置透明度值（0-1），默认值为0.03。

### 视频抽针
通过抽取特定帧来创建视频变化，可设置抽针间隔，默认每隔5帧抽取1帧，也支持随机间隔模式。

## 界面说明

1. **功能介绍区域**：显示各功能的详细说明
2. **文件选择区域**：点击"浏览..."按钮选择需要处理的视频文件
3. **输出路径区域**：设置处理后视频文件的保存位置
4. **功能选择区域**：勾选需要应用的去重功能
5. **开始处理按钮**：启动视频处理流程
6. **进度条**：显示处理进度和百分比
7. **处理日志区域**：显示处理过程的详细信息

## 注意事项

1. 支持的视频格式：MP4、AVI、MKV、MOV、WMV、FLV、WEBM等主流格式
2. 处理时间取决于视频大小和选择的功能数量
3. 处理过程会占用一定系统资源，请耐心等待
4. 请确保有足够的磁盘空间存储处理后的视频文件
5. 本工具已集成所有必要组件，无需额外安装
6. 如果启动失败，请检查杀毒软件是否阻止了程序运行
7. 处理后的视频会自动生成缩略图，便于在文件管理器中预览

## 开发说明

### 主要文件

- `video_dedup_tool.py` - 主程序文件，包含GUI界面和处理逻辑
- `launch_tool.bat` - 推荐的Windows启动脚本
- `start.bat` - 中文Windows启动脚本
- `ffmpeg-8.0/bin/ffmpeg.exe` - FFmpeg主程序
- `python/python.exe` - Python解释器

### 核心处理流程

1. 用户选择视频文件和功能选项
2. 根据选择构建FFmpeg命令
3. 调用FFmpeg执行视频处理
4. 实时监控处理进度
5. 生成处理后的视频文件

### FFmpeg命令说明

程序会根据用户选择的功能构建相应的FFmpeg命令：

- `-vf` 参数用于视频滤镜处理
- `-metadata` 参数用于添加元数据
- `-c:v libx264` 用于视频重新编码

## 常见问题

### 启动失败
1. 确保所有文件都在同一目录下
2. 确保Windows系统完整性
3. 检查杀毒软件是否阻止了程序运行

### 处理失败
1. 检查视频文件是否损坏
2. 确保磁盘有足够空间
3. 关闭可能占用视频文件的其他程序

### 处理时间过长
1. 视频文件较大时处理时间会相应增加
2. 选择的功能越多处理时间越长
3. 可以尝试降低视频质量设置来加快处理速度

## 免责声明

本工具仅供学习和技术研究使用，请遵守相关法律法规，不要用于任何违法用途.
